# ESP32-C3 Device Metadata
#
# Empty [`device.driver`] tables imply `partial` support status.
#
# If you modify a driver support status, run `cargo xtask update-chip-support-table` to
# update the table in the esp-hal README.

[device]
name  = "esp32c3"
arch  = "riscv"
cores = 1
trm   = "https://www.espressif.com/sites/default/files/documentation/esp32-c3_technical_reference_manual_en.pdf"

peripherals = [
    # Peripherals available in the PAC:
    "aes",
    "apb_ctrl",
    "apb_saradc",
    "assist_debug",
    "dma",
    "ds",
    "efuse",
    "extmem",
    "gpio",
    "gpio_sd",
    "hmac",
    "i2c0",
    "i2s0",
    "interrupt_core0",
    "io_mux",
    "ledc",
    "rmt",
    "rng",
    "rsa",
    "rtc_cntl",
    "sensitive",
    "sha",
    "spi0",
    "spi1",
    "spi2",
    "system",
    "systimer",
    "timg0",
    "timg1",
    "twai0",
    "uart0",
    "uart1",
    "uhci0",
    "uhci1",
    "usb_device",
    "xts_aes",
]

virtual_peripherals = [
    "adc1",
    "adc2",
]

symbols = [
    # Additional peripherals defined by us (the developers):
    "assist_debug_sp_monitor",
    "assist_debug_region_monitor",
    "gdma",
    "phy",
    "tsens",

    # ROM capabilities
    "rom_crc_le",
    "rom_crc_be",
    "rom_md5_bsd",

    # Wakeup SOC based on ESP-IDF:
    "pm_support_wifi_wakeup",
    "pm_support_bt_wakeup",
    "uart_support_wakeup_int",
    "gpio_support_deepsleep_wakeup",
]

memory = [{ name = "dram", start = 0x3FC8_0000, end = 0x3FCE_0000 }]

[device.adc]
support_status = "partial"
instances = [
    { name = "adc1" },
    { name = "adc2" },
]

[device.gpio]
support_status = "supported"
gpio_function = 1
input_signal_max = 100
output_signal_max = 128
constant_0_input = 0x1f
constant_1_input = 0x1e
pins = [
    { pin =  0, kind = ["input", "output", "analog", "rtc"] },
    { pin =  1, kind = ["input", "output", "analog", "rtc"] },
    { pin =  2, kind = ["input", "output", "analog", "rtc"], alternate_functions = { 2 = "FSPIQ" } },
    { pin =  3, kind = ["input", "output", "analog", "rtc"] },
    { pin =  4, kind = ["input", "output", "analog", "rtc"], alternate_functions = { 0 = "USB_JTAG_TMS", 2 = "FSPIHD" } },
    { pin =  5, kind = ["input", "output", "analog", "rtc"], alternate_functions = { 0 = "USB_JTAG_TDI", 2 = "FSPIWP" } },
    { pin =  6, kind = ["input", "output"],                  alternate_functions = { 0 = "USB_JTAG_TCK", 2 = "FSPICLK" } },
    { pin =  7, kind = ["input", "output"],                  alternate_functions = { 0 = "USB_JTAG_TDO", 2 = "FSPID" } },
    { pin =  8, kind = ["input", "output"] },
    { pin =  9, kind = ["input", "output"] },
    { pin = 10, kind = ["input", "output"],                  alternate_functions = { 2 = "FSPICS0" } },
    { pin = 11, kind = ["input", "output"] },
    { pin = 12, kind = ["input", "output"],                  alternate_functions = { 0 = "SPIHD" } },
    { pin = 13, kind = ["input", "output"],                  alternate_functions = { 0 = "SPIWP" } },
    { pin = 14, kind = ["input", "output"],                  alternate_functions = { 0 = "SPICS0" } },
    { pin = 15, kind = ["input", "output"],                  alternate_functions = { 0 = "SPICLK_MUX" } },
    { pin = 16, kind = ["input", "output"],                  alternate_functions = { 0 = "SPID" } },
    { pin = 17, kind = ["input", "output"],                  alternate_functions = { 0 = "SPIQ" } },
    { pin = 18, kind = ["input", "output"] },
    { pin = 19, kind = ["input", "output"] },
    { pin = 20, kind = ["input", "output"],                  alternate_functions = { 0 = "U0RXD" } },
    { pin = 21, kind = ["input", "output"],                  alternate_functions = { 0 = "U0TXD" } },
]
input_signals = [
    { name = "SPIQ",             id = 0 },
    { name = "SPID",             id = 1 },
    { name = "SPIHD",            id = 2 },
    { name = "SPIWP",            id = 3 },
    { name = "U0RXD",            id = 6 },
    { name = "U0CTS",            id = 7 },
    { name = "U0DSR",            id = 8 },
    { name = "U1RXD",            id = 9 },
    { name = "U1CTS",            id = 10 },
    { name = "U1DSR",            id = 11 },
    { name = "I2S_MCLK",         id = 12 },
    { name = "I2SO_BCK",         id = 13 },
    { name = "I2SO_WS",          id = 14 },
    { name = "I2SI_SD",          id = 15 },
    { name = "I2SI_BCK",         id = 16 },
    { name = "I2SI_WS",          id = 17 },
    { name = "GPIO_BT_PRIORITY", id = 18 },
    { name = "GPIO_BT_ACTIVE",   id = 19 },
    { name = "CPU_GPIO_0",       id = 28 },
    { name = "CPU_GPIO_1",       id = 29 },
    { name = "CPU_GPIO_2",       id = 30 },
    { name = "CPU_GPIO_3",       id = 31 },
    { name = "CPU_GPIO_4",       id = 32 },
    { name = "CPU_GPIO_5",       id = 33 },
    { name = "CPU_GPIO_6",       id = 34 },
    { name = "CPU_GPIO_7",       id = 35 },
    { name = "EXT_ADC_START",    id = 45 },
    { name = "RMT_SIG_0",        id = 51 },
    { name = "RMT_SIG_1",        id = 52 },
    { name = "I2CEXT0_SCL",      id = 53 },
    { name = "I2CEXT0_SDA",      id = 54 },
    { name = "FSPICLK",          id = 63 },
    { name = "FSPIQ",            id = 64 },
    { name = "FSPID",            id = 65 },
    { name = "FSPIHD",           id = 66 },
    { name = "FSPIWP",           id = 67 },
    { name = "FSPICS0",          id = 68 },
    { name = "TWAI_RX",          id = 74 },
    { name = "SIG_FUNC_97",      id = 97 },
    { name = "SIG_FUNC_98",      id = 98 },
    { name = "SIG_FUNC_99",      id = 99 },
    { name = "SIG_FUNC_100",     id = 100 },
]
output_signals = [
    { name = "SPIQ",             id = 0 },
    { name = "SPID",             id = 1 },
    { name = "SPIHD",            id = 2 },
    { name = "SPIWP",            id = 3 },
    { name = "SPICLK_MUX",       id = 4 },
    { name = "SPICS0",           id = 5 },
    { name = "U0TXD",            id = 6 },
    { name = "U0RTS",            id = 7 },
    { name = "U0DTR",            id = 8 },
    { name = "U1TXD",            id = 9 },
    { name = "U1RTS",            id = 10 },
    { name = "U1DTR",            id = 11 },
    { name = "I2S_MCLK",         id = 12 },
    { name = "I2SO_BCK",         id = 13 },
    { name = "I2SO_WS",          id = 14 },
    { name = "I2SO_SD",          id = 15 },
    { name = "I2SI_BCK",         id = 16 },
    { name = "I2SI_WS",          id = 17 },
    { name = "GPIO_WLAN_PRIO",   id = 18 },
    { name = "GPIO_WLAN_ACTIVE", id = 19 },
    { name = "CPU_GPIO_0",       id = 28 },
    { name = "CPU_GPIO_1",       id = 29 },
    { name = "CPU_GPIO_2",       id = 30 },
    { name = "CPU_GPIO_3",       id = 31 },
    { name = "CPU_GPIO_4",       id = 32 },
    { name = "CPU_GPIO_5",       id = 33 },
    { name = "CPU_GPIO_6",       id = 34 },
    { name = "CPU_GPIO_7",       id = 35 },
    { name = "USB_JTAG_TCK",     id = 36 },
    { name = "USB_JTAG_TMS",     id = 37 },
    { name = "USB_JTAG_TDI",     id = 38 },
    { name = "USB_JTAG_TDO",     id = 39 },
    { name = "LEDC_LS_SIG0",     id = 45 },
    { name = "LEDC_LS_SIG1",     id = 46 },
    { name = "LEDC_LS_SIG2",     id = 47 },
    { name = "LEDC_LS_SIG3",     id = 48 },
    { name = "LEDC_LS_SIG4",     id = 49 },
    { name = "LEDC_LS_SIG5",     id = 50 },
    { name = "RMT_SIG_0",        id = 51 },
    { name = "RMT_SIG_1",        id = 52 },
    { name = "I2CEXT0_SCL",      id = 53 },
    { name = "I2CEXT0_SDA",      id = 54 },
    { name = "GPIO_SD0",         id = 55 },
    { name = "GPIO_SD1",         id = 56 },
    { name = "GPIO_SD2",         id = 57 },
    { name = "GPIO_SD3",         id = 58 },
    { name = "I2SO_SD1",         id = 59 },
    { name = "FSPICLK"    ,      id = 63 },
    { name = "FSPIQ",            id = 64 },
    { name = "FSPID",            id = 65 },
    { name = "FSPIHD",           id = 66 },
    { name = "FSPIWP",           id = 67 },
    { name = "FSPICS0",          id = 68 },
    { name = "FSPICS1",          id = 69 },
    { name = "FSPICS3",          id = 70 },
    { name = "FSPICS2",          id = 71 },
    { name = "FSPICS4",          id = 72 },
    { name = "FSPICS5",          id = 73 },
    { name = "TWAI_TX",          id = 74 },
    { name = "TWAI_BUS_OFF_ON",  id = 75 },
    { name = "TWAI_CLKOUT",      id = 76 },
    { name = "ANT_SEL0",         id = 89 },
    { name = "ANT_SEL1",         id = 90 },
    { name = "ANT_SEL2",         id = 91 },
    { name = "ANT_SEL3",         id = 92 },
    { name = "ANT_SEL4",         id = 93 },
    { name = "ANT_SEL5",         id = 94 },
    { name = "ANT_SEL6",         id = 95 },
    { name = "ANT_SEL7",         id = 96 },
    { name = "SIG_FUNC_97",      id = 97 },
    { name = "SIG_FUNC_98",      id = 98 },
    { name = "SIG_FUNC_99",      id = 99 },
    { name = "SIG_FUNC_100",     id = 100 },
    { name = "CLK_OUT1",         id = 123 },
    { name = "CLK_OUT2",         id = 124 },
    { name = "CLK_OUT3",         id = 125 },
    { name = "SPICS1",           id = 126 },
    { name = "USB_JTAG_TRST",    id = 127 },
    { name = "GPIO",             id = 128 },
]

[device.i2c_master]
support_status = "supported"
instances = [
    { name = "i2c0", sys_instance = "I2cExt0", scl = "I2CEXT0_SCL", sda = "I2CEXT0_SDA", interrupt = "I2C_EXT0" },
]
has_fsm_timeouts = true
has_hw_bus_clear = true
ll_intr_mask = 0x3ffff
fifo_size = 32
has_bus_timeout_enable = true
max_bus_timeout = 0x1F
has_conf_update = true
has_arbitration_en = true
has_tx_fifo_watermark = true
bus_timeout_is_exponential = true

[device.interrupts]
support_status = "partial"
status_registers = 2

[device.rmt]
support_status = "partial"
ram_start = 0x60016400
channel_ram_size = 48

[device.spi_master]
support_status = "supported"
instances = [{ name = "spi2" }]

[device.timergroup]
instances = [{ name = "timg0" }, { name = "timg1" }]

[device.uart]
support_status = "supported"

[device.ds]
support_status = "not_supported"

# Other drivers which are partially supported but have no other configuration:

## Crypto
[device.aes]
[device.rsa]
[device.sha]
[device.hmac]
[device.rng]

## Interfaces
[device.i2s]
[device.ledc]
[device.spi_slave]
[device.twai]
[device.usb_serial_jtag]

## Miscellaneous
[device.assist_debug]
[device.dma]
[device.io_mux]
[device.temp_sensor]
[device.sleep]
[device.systimer]

## Radio
[device.wifi]
[device.bt]
