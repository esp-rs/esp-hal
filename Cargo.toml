[workspace]
resolver = "2"
members  = [
    "xtask",
    "esp-hal",
    "esp-alloc",
    "esp-backtrace",
    "esp-build",
    "esp-hal-embassy",
    "esp-hal-procmacros",
    "esp-hal-smartled",
    "esp-ieee802154",
    "esp-lp-hal",
    "esp-metadata",
    "esp-println",
    "esp-riscv-rt",
    "esp-wifi",
    "esp-storage",
    "examples",
    "extras/bench-server",
    "extras/esp-wifishark",
    "extras/ieee802154-sniffer",
    "hil-test",
]
exclude = [
    "xtensa-lx",
    "xtensa-lx-rt",
    "xtensa-lx-rt/procmacros",
]

# https://doc.rust-lang.org/cargo/reference/profiles.html#test
# Test and bench profiles inherit from dev and release respectively.
[profile.dev]
codegen-units    = 1
debug            = 2
debug-assertions = true
incremental      = false
opt-level        = "z"
overflow-checks  = true

[profile.release]
codegen-units    = 1
debug            = 2
debug-assertions = false
incremental      = false
opt-level        = 3
lto              = "fat"
overflow-checks  = false
